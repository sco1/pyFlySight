<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>pyflysight.flysight_utils API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pyflysight.flysight_utils</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="pyflysight.flysight_utils.classify_hardware_type"><code class="name flex">
<span>def <span class="ident">classify_hardware_type</span></span>(<span>device_root: pathlib.Path) ‑> <a title="pyflysight.FlysightType" href="index.html#pyflysight.FlysightType">FlysightType</a></span>
</code></dt>
<dd>
<div class="desc"><p>Classify the most likely FlySight type for the provided drive.</p>
<p>Classification is made based on the contents of the FlySight's <code>FLYSIGHT.TXT</code> state information
file, located at the root of the device. Based on the firmware source code for each hardware
iteration, it appears that the contents &amp; structure of this file differs significantly enough
between the two hardware revisions to reliably make an accurate distinction.</p></div>
</dd>
<dt id="pyflysight.flysight_utils.copy_logs"><code class="name flex">
<span>def <span class="ident">copy_logs</span></span>(<span>device_root: pathlib.Path, dest: pathlib.Path, filter_func: collections.abc.Callable[[pathlib.Path], bool] | None = None, exist_ok: bool = True, remove_after: bool = False) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Copy the log file tree from the provided device root to the specified destination directory.</p>
<p>A filtering function may be optionally specified as a callable that accepts a path to a single
directory of log files and returns <code>False</code> if the directory should not be copied.</p>
<p>If <code>exist_ok</code> is <code>False</code>, an exception will be raised if the target directory already exists in
the destination.</p>
<p>If <code>remove_after</code> is <code>True</code>, the log directory will be deleted from the FlySight device after
log data is copied to the destination.</p>
<p>WARNING: <code>exist_ok=True</code> and <code>remove_after=True</code> are both destructive operations. Overwritten
and/or deleted data will be lost permanently.</p></div>
</dd>
<dt id="pyflysight.flysight_utils.get_device_metadata"><code class="name flex">
<span>def <span class="ident">get_device_metadata</span></span>(<span>device_root: pathlib.Path) ‑> <a title="pyflysight.flysight_utils.FlysightMetadata" href="#pyflysight.flysight_utils.FlysightMetadata">FlysightMetadata</a></span>
</code></dt>
<dd>
<div class="desc"><p>Parse the provided FlySight device for some descriptive metadata.</p></div>
</dd>
<dt id="pyflysight.flysight_utils.get_flysight_drives"><code class="name flex">
<span>def <span class="ident">get_flysight_drives</span></span>(<span>) ‑> tuple[pathlib.Path]</span>
</code></dt>
<dd>
<div class="desc"><p>Return a tuple of mounted disk partitions that are likely FlySight devices.</p>
<p>FlySight devices should have a <code>FLYSIGHT.TXT</code> file in their root directory.</p>
<p>NOTE: If called immediately after a device is plugged in (e.g. if being called in a polling
loop), the OS may still be completing other tasks prior to assigning the device its actual drive
letter. While in this state, attempts to read from the device will raise an <code>OSError</code>.</p></div>
</dd>
<dt id="pyflysight.flysight_utils.iter_flysight_drives"><code class="name flex">
<span>def <span class="ident">iter_flysight_drives</span></span>(<span>) ‑> collections.abc.Generator[pathlib.Path, None, None]</span>
</code></dt>
<dd>
<div class="desc"><p>Iterate through the system's mounted disk partitions and yield likely FlySight devices.</p>
<p>FlySight devices should have a <code>FLYSIGHT.TXT</code> file in their root directory.</p>
<p>NOTE: If called immediately after a device is plugged in (e.g. if being called in a polling
loop), the OS may still be completing other tasks prior to assigning the device its actual drive
letter. While in this state, attempts to read from the device will raise an <code>OSError</code>.</p></div>
</dd>
<dt id="pyflysight.flysight_utils.wait_for_flysight"><code class="name flex">
<span>def <span class="ident">wait_for_flysight</span></span>(<span>timeout: int = 10, polling_interval: float = 0.01, verbose: bool = True, raise_on_timeout: bool = False) ‑> tuple[pathlib.Path]</span>
</code></dt>
<dd>
<div class="desc"><p>Poll the system for likely FlySight devices.</p>
<p>FlySight devices should have a <code>FLYSIGHT.TXT</code> file in their root directory.</p>
<p>While running, the system will be polled every <code>polling_interval</code> seconds for likely devices,
timing out after <code>timeout</code> seconds. A <code>TimeoutError</code> may be optionally raised by setting the
<code>raise_on_timeout</code> flag to <code>True</code>.</p>
<p>Status messages may be suppressed by setting <code>verbose</code> to <code>False</code>.</p></div>
</dd>
<dt id="pyflysight.flysight_utils.write_config"><code class="name flex">
<span>def <span class="ident">write_config</span></span>(<span>device_root: pathlib.Path, config: <a title="pyflysight.config_utils.FlysightConfig" href="config_utils.html#pyflysight.config_utils.FlysightConfig">FlysightConfig</a>, backup_existing: bool = True) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Write the provided FlySight configuration to the provided directory.</p>
<p>The configuration is written to <code>device_root/CONFIG.TXT</code>, if an existing configuration is
present and <code>backup_existing</code> is true, the existing file will be renamed to <code>CONFIG_OLD.TXT</code>
prior to writing of the new configuration; any existing configuration backup will be
overwritten.</p></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="pyflysight.flysight_utils.FlysightMetadata"><code class="flex name class">
<span>class <span class="ident">FlysightMetadata</span></span>
<span>(</span><span>flysight_type: <a title="pyflysight.FlysightType" href="index.html#pyflysight.FlysightType">FlysightType</a>, serial: str, firmware: str, n_logs: int)</span>
</code></dt>
<dd>
<div class="desc"><p>FlysightMetadata(flysight_type, serial, firmware, n_logs)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FlysightMetadata(t.NamedTuple):  # noqa: D101
    flysight_type: FlysightType
    serial: str
    firmware: str
    n_logs: int</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.tuple</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="pyflysight.flysight_utils.FlysightMetadata.firmware"><code class="name">var <span class="ident">firmware</span> : str</code></dt>
<dd>
<div class="desc"><p>Alias for field number 2</p></div>
</dd>
<dt id="pyflysight.flysight_utils.FlysightMetadata.flysight_type"><code class="name">var <span class="ident">flysight_type</span> : <a title="pyflysight.FlysightType" href="index.html#pyflysight.FlysightType">FlysightType</a></code></dt>
<dd>
<div class="desc"><p>Alias for field number 0</p></div>
</dd>
<dt id="pyflysight.flysight_utils.FlysightMetadata.n_logs"><code class="name">var <span class="ident">n_logs</span> : int</code></dt>
<dd>
<div class="desc"><p>Alias for field number 3</p></div>
</dd>
<dt id="pyflysight.flysight_utils.FlysightMetadata.serial"><code class="name">var <span class="ident">serial</span> : str</code></dt>
<dd>
<div class="desc"><p>Alias for field number 1</p></div>
</dd>
</dl>
</dd>
<dt id="pyflysight.flysight_utils.NoDeviceStateError"><code class="flex name class">
<span>class <span class="ident">NoDeviceStateError</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Inappropriate argument value (of correct type).</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NoDeviceStateError(ValueError): ...  # noqa: D101</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.ValueError</li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="pyflysight.flysight_utils.UnknownDeviceError"><code class="flex name class">
<span>class <span class="ident">UnknownDeviceError</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Inappropriate argument value (of correct type).</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class UnknownDeviceError(ValueError): ...  # noqa: D101</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.ValueError</li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pyflysight" href="index.html">pyflysight</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="pyflysight.flysight_utils.classify_hardware_type" href="#pyflysight.flysight_utils.classify_hardware_type">classify_hardware_type</a></code></li>
<li><code><a title="pyflysight.flysight_utils.copy_logs" href="#pyflysight.flysight_utils.copy_logs">copy_logs</a></code></li>
<li><code><a title="pyflysight.flysight_utils.get_device_metadata" href="#pyflysight.flysight_utils.get_device_metadata">get_device_metadata</a></code></li>
<li><code><a title="pyflysight.flysight_utils.get_flysight_drives" href="#pyflysight.flysight_utils.get_flysight_drives">get_flysight_drives</a></code></li>
<li><code><a title="pyflysight.flysight_utils.iter_flysight_drives" href="#pyflysight.flysight_utils.iter_flysight_drives">iter_flysight_drives</a></code></li>
<li><code><a title="pyflysight.flysight_utils.wait_for_flysight" href="#pyflysight.flysight_utils.wait_for_flysight">wait_for_flysight</a></code></li>
<li><code><a title="pyflysight.flysight_utils.write_config" href="#pyflysight.flysight_utils.write_config">write_config</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="pyflysight.flysight_utils.FlysightMetadata" href="#pyflysight.flysight_utils.FlysightMetadata">FlysightMetadata</a></code></h4>
<ul class="">
<li><code><a title="pyflysight.flysight_utils.FlysightMetadata.firmware" href="#pyflysight.flysight_utils.FlysightMetadata.firmware">firmware</a></code></li>
<li><code><a title="pyflysight.flysight_utils.FlysightMetadata.flysight_type" href="#pyflysight.flysight_utils.FlysightMetadata.flysight_type">flysight_type</a></code></li>
<li><code><a title="pyflysight.flysight_utils.FlysightMetadata.n_logs" href="#pyflysight.flysight_utils.FlysightMetadata.n_logs">n_logs</a></code></li>
<li><code><a title="pyflysight.flysight_utils.FlysightMetadata.serial" href="#pyflysight.flysight_utils.FlysightMetadata.serial">serial</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pyflysight.flysight_utils.NoDeviceStateError" href="#pyflysight.flysight_utils.NoDeviceStateError">NoDeviceStateError</a></code></h4>
</li>
<li>
<h4><code><a title="pyflysight.flysight_utils.UnknownDeviceError" href="#pyflysight.flysight_utils.UnknownDeviceError">UnknownDeviceError</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
